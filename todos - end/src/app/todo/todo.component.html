<div class="container">
  <h1>{{pageTitle}}
    @if (selectedMember(); as currentMember) {
    for: {{ currentMember.name}}
    }
  </h1>

  <div class="grid">
    <div class="row">
      <select class="select" (change)="onSelected($event.target)">
        <option value="" disabled selected>--Select a team member--</option>
        @for(member of members(); track member.id) {
          <option [value]='member.id'>{{ member.name }}</option>
        }
      </select>
    </div>
    <div class="row">
      <label>
        <input class="check" type='checkbox' (change)='onFilter($event.target)' />
        Show only incomplete tasks
      </label>
    </div>
  </div>

  @if (isLoading()) {
    <div class='indicator'>Loading ...</div>
  }

  @if (todosForMember()) {
    <div class='grid'>
      <div class='cellHeader'>Task</div>
      <div class='cellHeader'>Completed?</div>

      @for(t of todosForMember(); track t.id) {
        <div class='row' [ngClass]='{stripe: $even}'>
          <div class='cell'>{{ t.title}}</div>
          <div class='cellCheck'>
            <input type='checkbox' [checked]='t.completed'
                   (change)='onChangeStatus(t, $event.target)'>
          </div>
        </div>
      } @empty {
        @if(selectedMember()) {
          @if(incompleteOnly()) {
            <div>No incomplete todos</div>
          } @else {
            <div>No todos found</div>
          }
        }
      }
    </div>
  }

  @if (errorMessage()) {
    <div>Error: {{ errorMessage() }}</div>
  }
</div>